(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/article/ticket/index"],{109:
/*!********************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/main.js?{"page":"pages%2Farticle%2Fticket%2Findex"} ***!
  \********************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4);i(n(/*! vue */2));var e=i(n(/*! ./pages/article/ticket/index.vue */110));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},110:
/*!***********************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue ***!
  \***********************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! ./index.vue?vue&type=template&id=0463b6fe& */111),u=n(/*! ./index.vue?vue&type=script&lang=js& */113);for(var o in u)"default"!==o&&function(t){n.d(e,t,(function(){return u[t]}))}(o);n(/*! ./index.vue?vue&type=style&index=0&lang=scss& */115);var s,l=n(/*! ../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */13),r=Object(l["default"])(u["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],s);r.options.__file="pages/article/ticket/index.vue",e["default"]=r.exports},111:
/*!******************************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue?vue&type=template&id=0463b6fe& ***!
  \******************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=0463b6fe& */112);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},112:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue?vue&type=template&id=0463b6fe& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return u})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return o})),n.d(e,"components",(function(){return i}));try{i={uTopTips:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-top-tips/u-top-tips */"node-modules/uview-ui/components/u-top-tips/u-top-tips").then(n.bind(null,/*! uview-ui/components/u-top-tips/u-top-tips.vue */229))},uCard:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-card/u-card */"node-modules/uview-ui/components/u-card/u-card").then(n.bind(null,/*! uview-ui/components/u-card/u-card.vue */187))},uIcon:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-icon/u-icon */"node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,/*! uview-ui/components/u-icon/u-icon.vue */166))},uCellGroup:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-cell-group/u-cell-group */"node-modules/uview-ui/components/u-cell-group/u-cell-group").then(n.bind(null,/*! uview-ui/components/u-cell-group/u-cell-group.vue */266))},uCellItem:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-cell-item/u-cell-item */"node-modules/uview-ui/components/u-cell-item/u-cell-item").then(n.bind(null,/*! uview-ui/components/u-cell-item/u-cell-item.vue */273))},uNumberBox:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-number-box/u-number-box */"node-modules/uview-ui/components/u-number-box/u-number-box").then(n.bind(null,/*! uview-ui/components/u-number-box/u-number-box.vue */236))},uModal:function(){return n.e(/*! import() | node-modules/uview-ui/components/u-modal/u-modal */"node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,/*! uview-ui/components/u-modal/u-modal.vue */173))}}}catch(l){if(-1===l.message.indexOf("Cannot find module")||-1===l.message.indexOf(".vue"))throw l;console.error(l.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var u=function(){var t=this,e=t.$createElement,n=(t._self._c,t.ticketResults.name?t.datetime(t.ticketResults.date):null);t.$mp.data=Object.assign({},{$root:{m0:n}})},o=!1,s=[];u._withStripped=!0},113:
/*!************************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */114),u=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=u.a},114:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(n(/*! @/store/index.js */8)),u=l(n(/*! @/axios/index.js */50)),o=l(n(/*! @/router/index.js */97)),s=n(/*! @/utils/date.js */98);function l(t){return t&&t.__esModule?t:{default:t}}var r=function(){n.e(/*! require.ensure | components/tabber/index */"components/tabber/index").then(function(){return resolve(n(/*! @/components/tabber/index.vue */208))}.bind(null,n)).catch(n.oe)},a={data:function(){return{form:{},user:{token:null,openid:null,userid:null},userTicket:{userid:null,full_name:null},ticketResults:{id:null,name:null,money:null,number:1,rwm_image:null,date:"2021-08-28T00:00:00+08:00",num:null,create_date:"2021-08-25T22:20:09.049429+08:00",change_date:"2021-08-25T22:20:09.049443+08:00",activity_key:null},contextResults:{id:null,name:null,context:null,money:null,images:null,user_name:null,dateday:null,browse:null,user_attend_num:null,start_date:"00/00/00 00:00",end_date:"00/00/00 00:00",amap:[{lnglat:{lng:116.319089,lat:39.942349},name:null,address:null,adname:null,cityname:null}]},out_trade_no:{pay:!1,show:!1,title:"成功",content:"已成功购票，后续请留意主页票务选项（后期增加）",confirm_text:"完成",count:1,next:null,previous:null,results:[{out_trade_no:"416f733ec23ea68c7ba635dd77fe20",status:1,trade_no:2,openid:"ovil75JE6yfeDfp6fqYa8rt67fQ4",prepay_id:"wx2522254915595197f40391dbd0ffe80000",name:"测试1",number:1,money:1,userid:2}]}}},onLoad:function(e){var n=this;i.default.commit("ticketUserId",null),i.default.commit("ticketUserFullName",null),i.default.commit("ticketListId",null),i.default.commit("ticketListName",null),t.setNavigationBarTitle({title:"票种信息"}),t.showLoading({title:"加载中",mask:!0}),this.contextResults.id=e.id,this.contextResults.name=e.title,console.log(e);var o=i.default.getters["getUser"];this.user.token=o.token,this.user.userid=o.userid,this.user.openid=o.openid,u.default.activity("GET",{},this.contextResults.id).then((function(t){n.contextResults=t,n.contextResults.start_date=(0,s.DateMat)(n.contextResults.start_date).format("yy/MM/dd hh:mm"),n.contextResults.end_date=(0,s.DateMat)(n.contextResults.end_date).format("yy/MM/dd hh:mm")})).catch((function(t){n.$refs.uTips.show({title:"接口错误:"+t.msg,type:"error",duration:"10000"})})).finally((function(){setTimeout((function(){t.hideLoading()}),100)}))},components:{"x-tabber":r},methods:{clickCellItem:function(e){console.log(e),this.ticketResults.number=1,0===e?(i.default.commit("ticketListId",null),i.default.commit("ticketListName",null),t.navigateTo({url:o.default.article_ticket_list({id:this.contextResults.id,title:this.contextResults.name})})):1===e&&(i.default.commit("ticketUserId",null),i.default.commit("ticketUserFullName",null),t.navigateTo({url:o.default.article_ticket_user_list({id:this.contextResults.id,title:this.contextResults.name})}))},datetime:function(t){return(0,s.DateMat)(t).format("yyyy/MM/dd hh:mm")},cancel:function(){this.out_trade_no.show=!1},sendForm:function(){var t=this;this.userTicket.userid&&this.ticketResults.id?u.default.payInfo("GET",{openid:this.user.openid,userid:this.user.userid,trade_no__activity_key:this.contextResults.id,status:0}).then((function(e){console.log("response",e.results.length),t.out_trade_no.results.length>0?(t.out_trade_no.title="已有成功购票记录",t.out_trade_no.content="您已成功购票，购买了 "+e.results.length+" 张门票",t.out_trade_no.confirm_text="继续"):t.out_trade_no.results.length<1&&t.WPay(),t.out_trade_no.show=!0})):(console.log("err"),this.$refs.uTips.show({title:"请选择票种或用户信息",type:"warning",duration:"2300"}))},WPay:function(){var e=this;console.log("支付"),this.out_trade_no.pay?(this.out_trade_no.pay=!1,t.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})):this.user.openid?u.default.paymentPay("POST",{userid:this.user.userid,openid:this.user.openid,trade_no:this.ticketResults.id,activity_id:this.contextResults.id,money:this.ticketResults.money,name:this.ticketResults.name,number:this.ticketResults.number,user_ful:this.userTicket.userid}).then((function(n){console.log(n),t.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(n){console.log("支付成功：",n),e.out_trade_no.title="成功",e.out_trade_no.content="已成功购票，后续请留意主页票务选项（后期增加）",e.out_trade_no.confirm_text="完成",e.out_trade_no.show=!0,e.out_trade_no.pay=!0,t.showToast({title:"支付成功"})},fail:function(t){console.log("支付失败：",t),e.$refs.uTips.show({title:"支付失败",type:"error",duration:"30000"})}})})):(console.log("未登录"),this.$refs.uTips.show({title:"请登录",type:"warning",duration:"2300"}))}},computed:{ticketUser:function(){return i.default.getters["getTicketUserID"]},ticketList:function(){return i.default.getters["getTicketListID"]}},watch:{ticketUser:function(t){console.log("获取活动购票选择的用户信息",t,e);var e=i.default.getters["getTicketUserFullName"];this.userTicket.userid=t,this.userTicket.full_name=e,console.log("获取活动购票选择的用户信息",this.userTicket,t,e)},ticketList:function(e){var n=this,o=i.default.getters["getTicketListName"];console.log("获取活动购票选择的用户信息",o),this.ticketResults.id=e,this.ticketResults.name=o,t.showLoading({title:"加载中",mask:!0}),u.default.activityTicket("GET",{},this.ticketResults.id).then((function(t){n.ticketResults.id=t.id,n.ticketResults.name=t.name,n.ticketResults.money=t.money,n.ticketResults.rwm_image=t.rwm_image,n.ticketResults.date=t.date,n.ticketResults.num=t.num,n.ticketResults.create_date=t.create_date,n.ticketResults.change_date=t.change_date,n.ticketResults.activity_key=t.activity_key,console.log("ticketResults",t)})).catch((function(t){n.$refs.uTips.show({title:"接口错误:"+t.msg,type:"error",duration:"10000"})})).finally((function(){setTimeout((function(){t.hideLoading()}),100)})),console.log("获取活动购票选择的用户信息",this.userTicket,e,o)}}};e.default=a}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},115:
/*!*********************************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue?vue&type=style&index=0&lang=scss& ***!
  \*********************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss& */116),u=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=u.a},116:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yons/code/HanfuApp-master/pages/article/ticket/index.vue?vue&type=style&index=0&lang=scss& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[109,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/article/ticket/index.js.map