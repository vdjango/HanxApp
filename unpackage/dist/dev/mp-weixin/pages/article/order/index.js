(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/article/order/index"],{101:
/*!*******************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/main.js?{"page":"pages%2Farticle%2Forder%2Findex"} ***!
  \*******************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){t(/*! uni-pages */4);o(t(/*! vue */2));var n=o(t(/*! ./pages/article/order/index.vue */102));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},102:
/*!**********************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/order/index.vue ***!
  \**********************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! ./index.vue?vue&type=template&id=87753f62& */103),r=t(/*! ./index.vue?vue&type=script&lang=js& */105);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(/*! ./index.vue?vue&type=style&index=0&lang=scss& */107);var u,s=t(/*! ../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */13),c=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],u);c.options.__file="pages/article/order/index.vue",n["default"]=c.exports},103:
/*!*****************************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/order/index.vue?vue&type=template&id=87753f62& ***!
  \*****************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=87753f62& */104);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},104:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yons/code/HanfuApp-master/pages/article/order/index.vue?vue&type=template&id=87753f62& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return u})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));try{o={uTopTips:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-top-tips/u-top-tips */"node-modules/uview-ui/components/u-top-tips/u-top-tips").then(t.bind(null,/*! uview-ui/components/u-top-tips/u-top-tips.vue */229))},uCard:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-card/u-card */"node-modules/uview-ui/components/u-card/u-card").then(t.bind(null,/*! uview-ui/components/u-card/u-card.vue */187))},uIcon:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-icon/u-icon */"node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,/*! uview-ui/components/u-icon/u-icon.vue */166))},uNumberBox:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-number-box/u-number-box */"node-modules/uview-ui/components/u-number-box/u-number-box").then(t.bind(null,/*! uview-ui/components/u-number-box/u-number-box.vue */236))},uModal:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-modal/u-modal */"node-modules/uview-ui/components/u-modal/u-modal").then(t.bind(null,/*! uview-ui/components/u-modal/u-modal.vue */173))},uForm:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-form/u-form */"node-modules/uview-ui/components/u-form/u-form").then(t.bind(null,/*! uview-ui/components/u-form/u-form.vue */243))},uFormItem:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-form-item/u-form-item */[t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,/*! uview-ui/components/u-form-item/u-form-item.vue */250))},uInput:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-input/u-input */[t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,/*! uview-ui/components/u-input/u-input.vue */259))},uSkeleton:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-skeleton/u-skeleton */"node-modules/uview-ui/components/u-skeleton/u-skeleton").then(t.bind(null,/*! uview-ui/components/u-skeleton/u-skeleton.vue */201))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement,t=(e._self._c,e.loading?null:e.__map(e.contextResults.results,(function(n,t){var o=e.__get_orig(n),r=e.money_tole(n.money);return{$orig:o,m0:r}})));e.$mp.data=Object.assign({},{$root:{l0:t}})},i=!1,u=[];r._withStripped=!0},105:
/*!***********************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/order/index.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */106),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},106:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yons/code/HanfuApp-master/pages/article/order/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t(/*! @/store/index.js */8)),r=i(t(/*! @/axios/index.js */50));i(t(/*! @/router/index.js */97));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){t.e(/*! require.ensure | components/tabber/index */"components/tabber/index").then(function(){return resolve(t(/*! @/components/tabber/index.vue */208))}.bind(null,t)).catch(t.oe)},s={data:function(){return{articleContext:{},contextResults:{results:[]},out_trade_no:{title:"成功",content:"已成功购票，后续请留意主页票务选项（后期增加）",confirm_text:"完成",count:1,next:null,previous:null,results:[{out_trade_no:"416f733ec23ea68c7ba635dd77fe20",status:1,trade_no:2,openid:"ovil75JE6yfeDfp6fqYa8rt67fQ4",prepay_id:"wx2522254915595197f40391dbd0ffe80000",name:"测试1",number:1,money:1,userid:2}]},election:0,loading:!0,specSelected:{number:1,data:{id:null,money:0}},UserInfo:{login:!1,avatarUrl:"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIVUHJYDoYklJFAIIdmiaQIrfXhSHXUzW9n6Ll06brS7m0xU9FYc8A9ibbCickaicics5mUHvAAWib9iabibQ/132",city:"门头沟",country:"中国",gender:1,language:"zh_CN",nickName:"君思",province:"北京"},user:{token:null,userid:null,openid:null},userInfoText:{loading:!1,full_name:null,certificates_no:null,mobile:null},rules:{full_name:[{required:!0,message:"请输入姓名",trigger:["change","blur"]}],certificates_no:[{required:!0,message:"请输入身份证号",trigger:["change","blur"]}],mobile:[{required:!0,message:"请输入手机号",trigger:["change","blur"]}]},pay_:!1,pay_cancel:!0,pay_title:"支付",pay_confirm_text:"付款",pay_context:"已成功购票，后续请留意主页票务选项（后期增加）",pay_success:!1}},onLoad:function(n){var t=this;e.hideShareMenu();var i=n.id,u=n.title;this.articleContext.id=i,this.articleContext.title=u,e.setNavigationBarTitle({title:"票种"}),r.default.activityTicket("GET",{activity_key:i},null).then((function(e){t.contextResults=e,console.log("response",e),t.contextResults.results&&(t.specSelected.data=t.contextResults.results[0]),setTimeout((function(){t.loading=!1}),300)}));var s=o.default.getters["getUser"];this.user.token=s.token,this.user.userid=s.userid,this.user.openid=s.openid,this.UserInfo.login=s.login,this.UserInfo.avatarUrl=s.avatarUrl,this.UserInfo.city=s.city,this.UserInfo.country=s.country,this.UserInfo.gender=s.gender,this.UserInfo.language=s.language,this.UserInfo.nickName=s.nickName,this.UserInfo.province=s.province,r.default.userInfo("GET",{user:this.user.userid}).then((function(e){console.log("验证通过",e),e.results.length<1?(t.$refs.uTips.show({title:"warning",type:"success",duration:"5000"}),setTimeout((function(){t.userInfoText.loading=!0}),100)):(t.$refs.uTips.show({title:"获取用户信息成功",type:"success",duration:"2300"}),r.default.payInfo("GET",{openid:t.user.openid,userid:t.user.userid,trade_no__activity_key:t.articleContext.id,status:0}).then((function(e){if(t.out_trade_no=e,t.out_trade_no.title="成功",t.out_trade_no.content="已成功购票，后续请留意主页票务选项（后期增加）",t.out_trade_no.confirm_text="完成",t.out_trade_no.count=e.count,t.out_trade_no.next=e.next,t.out_trade_no.previous=e.previous,t.out_trade_no.results=e.results,setTimeout((function(){t.loading=!1}),100),console.log("response",t.out_trade_no.results.length),t.out_trade_no.results.length>0){var n=0;for(var o in t.out_trade_no.results)n+=t.out_trade_no.results[o].number;t.out_trade_no.title="已有成功购票记录",t.out_trade_no.content="您已成功购票，购买了 "+n+" 张门票",t.out_trade_no.confirm_text="继续",t.pay_success=!0}})))})).catch((function(){t.$refs.uTips.show({title:"获取用户信息成功",type:"error",duration:"5000"})})).finally((function(){}))},onReady:function(){this.$refs.uForm.setRules(this.rules)},components:{"x-tabber":u},computed:{},methods:{ticketElection:function(e,n){this.election=e,this.specSelected.data=n,console.log(e,n)},numberChange:function(e){this.specSelected.number=e.number},confirm:function(){this.pay_=!0,this.pay_context="票种："+this.specSelected.data.name+"<br> 数量："+this.specSelected.number+"张<br> 价格："+this.money_tole(this.specSelected.data.money)*this.specSelected.number+"元"},confirmUserInfo:function(){var n=this;this.$refs.uForm.validate((function(t){t?(e.showLoading({title:"加载中"}),r.default.userInfo("POST",{user:n.user.userid,full_name:n.userInfoText.full_name,certificates_no:n.userInfoText.certificates_no,mobile:n.userInfoText.mobile}).then((function(e){console.log("验证通过"),n.$refs.uTips.show({title:"用户信息添加成功",type:"success",duration:"2300"})})).catch((function(){n.$refs.uTips.show({title:"用户信息添加失败，请不要购票。",type:"error",duration:"5000"})})).finally((function(){setTimeout((function(){n.userInfoText.loading=!1,n.$refs.uModalUserInfo.clearLoading(),e.hideLoading()}),100)}))):(console.log("验证失败"),n.$refs.uModalUserInfo.clearLoading())}))},pay_confirm:function(){"继续"!=this.out_trade_no.confirm_text&&e.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},WPay:function(){var n=this;console.log("支付"),this.out_trade_no.title="成功",this.out_trade_no.content="已成功购票，后续请留意主页票务选项（后期增加）",this.out_trade_no.confirm_text="完成",this.user.openid?r.default.paymentPay("POST",{userid:this.user.userid,openid:this.user.openid,trade_no:this.specSelected.data.id,activity_id:this.articleContext.id,money:this.specSelected.data.money,name:this.specSelected.data.name,number:this.specSelected.number}).then((function(t){console.log(t),e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(t){n.pay_success=!0,console.log("支付成功：",t),e.showToast({title:"支付成功"})},fail:function(e){console.log("支付失败：",e),this.$refs.uTips.show({title:"支付失败: "+e,type:"error",duration:"30000"})}})})):(console.log("未登录"),this.$refs.uTips.show({title:"请登录",type:"warning",duration:"2300"}))},getUserInfo:function(n){var t=this;e.getUserProfile({lang:"zh_CN",desc:"需要登陆哦",withCredentials:!0,success:function(n){e.showLoading({title:"登陆中"}),t.UserInfo.avatarUrl=n.userInfo.avatarUrl,t.UserInfo.city=n.userInfo.city,t.UserInfo.country=n.userInfo.country,t.UserInfo.gender=n.userInfo.gender,t.UserInfo.language=n.userInfo.language,t.UserInfo.nickName=n.userInfo.nickName,t.UserInfo.province=n.userInfo.province,t.getOpenId(t.UserInfo)},fail:function(e){console.log("getUserInfo.fail"),console.log(e)}})},getOpenId:function(n){var t=this;e.login({provider:"weixin",success:function(i){r.default.wechatAuthCode2("POST",{code:i.code,res:n}).then((function(n){console.log("wechatAuthCode2",n),console.log("wechatAuthCode2",n,i),t.user.code=i.code,t.user.userid=n.userid,t.user.openid=n.openid,t.UserInfo.login=!0,o.default.commit("login",{token:null,userid:t.user.userid,openid:t.user.openid,login:t.UserInfo.login,avatarUrl:t.UserInfo.avatarUrl,city:t.UserInfo.city,country:t.UserInfo.country,gender:t.UserInfo.gender,language:t.UserInfo.language,nickName:t.UserInfo.nickName,province:t.UserInfo.province}),e.showToast({title:"登陆成功"})})).catch((function(){t.$refs.uTips.show({title:"接口错误.request",type:"error",duration:"2300"})})).finally((function(){setTimeout((function(){e.hideLoading()}),100)}))}})},money_tole:function(e){return parseInt(e)/100}}};n.default=s}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},107:
/*!********************************************************************************************************!*\
  !*** /Users/yons/code/HanfuApp-master/pages/article/order/index.vue?vue&type=style&index=0&lang=scss& ***!
  \********************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss& */108),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},108:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yons/code/HanfuApp-master/pages/article/order/index.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){}},[[101,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/article/order/index.js.map